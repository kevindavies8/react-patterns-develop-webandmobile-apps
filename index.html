<!doctype html>
<html>
<body>
  <meta charset="UTF-8">
  <style>
/*! https://github.com/MozMorris/tomorrow-pygments/blob/master/css/tomorrow.css */.highlight .gh,.highlight .gp,.highlight .gs,.highlight .gu{font-weight:700}.highlight .hll{background-color:#d6d6d6}.highlight{background:#fff;color:#4d4d4c}.highlight .c{color:#8e908c}.highlight .err{color:#c82829}.highlight .k{color:#8959a8}.highlight .l{color:#f5871f}.highlight .n{color:#4d4d4c}.highlight .o{color:#3e999f}.highlight .p{color:#4d4d4c}.highlight .c1,.highlight .cm,.highlight .cp,.highlight .cs{color:#8e908c}.highlight .gd{color:#c82829}.highlight .ge{font-style:italic}.highlight .gh{color:#4d4d4c}.highlight .gi{color:#718c00}.highlight .gp{color:#8e908c}.highlight .gu{color:#3e999f}.highlight .kc,.highlight .kd{color:#8959a8}.highlight .kn{color:#3e999f}.highlight .kp,.highlight .kr{color:#8959a8}.highlight .kt{color:#eab700}.highlight .ld{color:#718c00}.highlight .m{color:#f5871f}.highlight .s{color:#718c00}.highlight .na{color:#4271ae}.highlight .nb{color:#4d4d4c}.highlight .nc{color:#eab700}.highlight .no{color:#c82829}.highlight .nd{color:#3e999f}.highlight .ni{color:#4d4d4c}.highlight .ne{color:#c82829}.highlight .nf{color:#4271ae}.highlight .nl{color:#4d4d4c}.highlight .nn{color:#eab700}.highlight .nx{color:#4271ae}.highlight .py{color:#4d4d4c}.highlight .nt{color:#3e999f}.highlight .nv{color:#c82829}.highlight .ow{color:#3e999f}.highlight .w{color:#4d4d4c}.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:#f5871f}.highlight .sb{color:#718c00}.highlight .sc{color:#4d4d4c}.highlight .sd{color:#8e908c}.highlight .s2{color:#718c00}.highlight .se{color:#f5871f}.highlight .sh{color:#718c00}.highlight .si{color:#f5871f}.highlight .s1,.highlight .sr,.highlight .ss,.highlight .sx{color:#718c00}.highlight .bp{color:#4d4d4c}.highlight .vc,.highlight .vg,.highlight .vi{color:#c82829}.highlight .il{color:#f5871f}.highlight .o+.err{color:#4271ae}

/* site and markdown styles */
html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}
html{-webkit-font-smoothing:antialiased}
body{font-size:16px; margin:5vw 5vw 0;color:#111;font-family:-apple-system,BlinkMacSystemFont,sans-serif}
h1,h2,h3,h4,h5,h6{font-size:1em}
h2{margin-top:12vw}
p{font-family:Athelas,Georgia,serif}
pre code{display:table}
code, pre{font-family: monospace, monospace;font-size: 1em}
code, .highlight pre{font-size: .9em}
#contents + ul{text-decoration:none;padding-left:20px}
.black-link, #contents + ul li a{color:#000;text-decoration:none}
.black-link, #contents + ul li a:hover{text-decoration:underline}
.highlight{margin:1rem 0}
  </style>
  <h1 style="margin-bottom: 12vw; font-size: 1em; font-weight: normal">
    React Patterns
    <span style="color: #aaa">
      [<a href="https://github.com/chantastic/reactpatterns.com/issues" class="black-link">on github</a>]
    </span>

    <div style="float: right; margin-top: 1rem; margin-bottom: 1rem">
      <a href="https://learnreact.com/courses/function-components" target="_blank" rel="noopener" style="display: flex; line-height: 1.25; font-size: 12px; box-sizing: border-box; width: 320px; max-width: 320px; text-decoration: none; color: #222">
        <div style="box-sizing: border-box; border: 1px solid lightgray; overflow: hidden">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 260 200" width="130px" height="100px" style="display: block">
            <title>Learn React Ad</title>
            <g fill="none" fill-rule="evenodd">
              <path fill="#FFF" d="M-12.627 35.646h283.254v148.708H-12.627z"/>
              <path fill="#000" fill-opacity=".8" d="M26.738 70V43.45h6.45v20.962h10.274V70H26.737zm31.575-11.475c0-.975-.307-1.812-.92-2.512-.612-.7-1.53-1.05-2.755-1.05-.6 0-1.15.093-1.65.28-.5.188-.938.444-1.313.77-.375.325-.675.706-.9 1.143-.225.438-.35.894-.375 1.37h7.913zm5.662 2.363v.75c0 .25-.012.487-.038.712H50.4c.05.525.206 1 .47 1.425.26.425.6.794 1.01 1.106.414.32.876.56 1.39.74.51.18 1.042.26 1.592.26.976 0 1.8-.18 2.475-.54.676-.36 1.225-.83 1.65-1.4l4.276 2.7c-.876 1.28-2.032 2.26-3.47 2.95-1.437.69-3.105 1.03-5.005 1.03-1.4 0-2.725-.22-3.975-.65-1.25-.44-2.344-1.07-3.282-1.91-.93-.83-1.67-1.86-2.21-3.09-.54-1.22-.8-2.62-.8-4.2 0-1.52.26-2.9.79-4.14.53-1.24 1.24-2.29 2.14-3.15.9-.86 1.96-1.53 3.19-2.01 1.23-.47 2.55-.71 3.98-.71 1.38 0 2.64.23 3.79.7 1.15.46 2.14 1.13 2.96 2.01.83.88 1.47 1.94 1.93 3.19.47 1.25.7 2.68.7 4.28zm14.625.974h-.787c-.676 0-1.357.032-2.044.094-.69.063-1.3.18-1.84.356s-.98.432-1.33.77c-.35.337-.53.78-.53 1.33 0 .35.08.65.24.9.16.25.36.45.62.6.25.15.53.257.86.32.32.062.63.093.94.093 1.25 0 2.2-.344 2.87-1.03.66-.69.99-1.62.99-2.795v-.638zm-11.287-7.987c1.1-1.05 2.38-1.837 3.843-2.362 1.463-.526 2.956-.788 4.48-.788 1.577 0 2.908.194 3.995.58 1.09.39 1.97.99 2.65 1.8.68.814 1.17 1.84 1.48 3.076.32 1.24.47 2.71.47 4.41V70H78.6v-1.987h-.112c-.476.775-1.194 1.374-2.157 1.8-.96.425-2 .637-3.13.637-.75 0-1.52-.1-2.32-.3-.8-.2-1.53-.525-2.19-.975-.66-.45-1.2-1.05-1.63-1.8-.42-.75-.64-1.675-.64-2.775 0-1.35.37-2.437 1.11-3.262.74-.826 1.69-1.463 2.85-1.913 1.16-.45 2.46-.75 3.88-.9 1.43-.15 2.82-.225 4.17-.225V58c0-.925-.32-1.606-.97-2.044-.65-.437-1.45-.656-2.4-.656-.87 0-1.71.187-2.53.563-.81.375-1.5.824-2.08 1.35l-3.11-3.338zm33.6 2.475c-.276-.075-.544-.125-.807-.15-.262-.025-.518-.038-.768-.038-.826 0-1.52.15-2.082.45-.562.3-1.012.663-1.35 1.088-.337.425-.58.887-.73 1.387-.15.5-.226.938-.226 1.313V70H88.8V51.325h5.925v2.7h.075c.475-.95 1.15-1.725 2.025-2.325.875-.6 1.887-.9 3.037-.9.25 0 .494.012.732.038.237.025.43.062.58.112l-.262 5.4zm15 13.65V59.8c0-.525-.044-1.025-.132-1.5-.08-.475-.23-.894-.43-1.256-.2-.363-.48-.65-.84-.863-.36-.21-.82-.31-1.37-.31-.55 0-1.03.11-1.44.32-.41.21-.75.51-1.03.88-.27.38-.48.81-.62 1.3s-.2 1-.2 1.52V70h-6.19V51.325h5.97v2.587h.08c.23-.4.52-.793.88-1.18.36-.388.79-.72 1.28-.995s1.02-.5 1.6-.675c.58-.175 1.19-.262 1.84-.262 1.25 0 2.31.225 3.19.675.88.45 1.58 1.03 2.12 1.744.54.71.93 1.53 1.17 2.45.24.92.36 1.85.36 2.77V70h-6.19zm34.762 0l-5.738-10.538h-2.175V70h-6.3V43.45h10.126c1.275 0 2.518.13 3.73.394 1.213.262 2.3.706 3.263 1.33.97.626 1.74 1.45 2.31 2.476.58 1.025.87 2.3.87 3.825 0 1.8-.48 3.312-1.46 4.538-.97 1.225-2.32 2.1-4.05 2.625L158.18 70h-7.5zm-.263-18.413c0-.625-.13-1.13-.393-1.518-.27-.39-.6-.69-1.02-.9-.41-.22-.88-.36-1.39-.44-.52-.08-1.01-.11-1.49-.11h-3.41v6.19h3.03c.52 0 1.06-.05 1.61-.13.55-.09 1.05-.25 1.5-.47.45-.23.82-.55 1.1-.98.29-.43.43-.98.43-1.65zm22.988 6.938c0-.975-.306-1.812-.92-2.512-.61-.7-1.53-1.05-2.755-1.05-.6 0-1.15.093-1.65.28-.5.188-.937.444-1.313.77-.375.325-.674.706-.9 1.143-.225.438-.35.894-.374 1.37h7.912zm5.662 2.363v.75c0 .25-.012.487-.037.712h-13.537c.05.525.206 1 .468 1.425.263.425.6.794 1.013 1.106.41.32.87.56 1.38.74.51.18 1.04.26 1.59.26.97 0 1.8-.18 2.47-.54.67-.36 1.22-.83 1.65-1.4l4.27 2.7c-.88 1.28-2.03 2.26-3.47 2.95-1.44.69-3.11 1.03-5.01 1.03-1.4 0-2.73-.22-3.98-.65-1.25-.44-2.35-1.07-3.28-1.91-.94-.83-1.68-1.86-2.22-3.09-.53-1.22-.8-2.62-.8-4.2 0-1.52.26-2.9.78-4.14.52-1.24 1.24-2.29 2.14-3.15.9-.86 1.96-1.53 3.18-2.01 1.22-.47 2.55-.71 3.97-.71 1.37 0 2.64.23 3.79.7 1.15.46 2.14 1.13 2.96 2.01.83.88 1.47 1.94 1.93 3.19.46 1.25.7 2.68.7 4.28zm14.625.974h-.787c-.675 0-1.356.032-2.044.094-.687.063-1.3.18-1.837.356-.54.176-.99.432-1.34.77-.35.337-.53.78-.53 1.33 0 .35.08.65.24.9.16.25.37.45.62.6.25.15.53.257.86.32.32.062.64.093.94.093 1.25 0 2.2-.344 2.87-1.03.66-.69.99-1.62.99-2.795v-.638zM182.4 53.875c1.1-1.05 2.38-1.837 3.844-2.362 1.462-.526 2.956-.788 4.48-.788 1.576 0 2.907.194 3.995.58 1.08.39 1.96.99 2.64 1.8.67.814 1.17 1.84 1.48 3.076.31 1.24.47 2.71.47 4.41V70h-5.63v-1.987h-.12c-.48.775-1.2 1.374-2.16 1.8-.97.425-2.01.637-3.13.637-.75 0-1.53-.1-2.33-.3-.8-.2-1.53-.525-2.2-.975-.67-.45-1.21-1.05-1.64-1.8-.43-.75-.64-1.675-.64-2.775 0-1.35.37-2.437 1.1-3.262.73-.826 1.68-1.463 2.85-1.913 1.16-.45 2.45-.75 3.88-.9 1.42-.15 2.81-.225 4.16-.225V58c0-.925-.33-1.606-.98-2.044-.65-.437-1.45-.656-2.4-.656-.88 0-1.72.187-2.53.563-.82.375-1.51.824-2.08 1.35l-3.12-3.338zm34.35 3.487c-.35-.45-.825-.812-1.425-1.087-.6-.275-1.212-.413-1.837-.413-.65 0-1.238.132-1.763.394-.525.263-.975.613-1.35 1.05-.375.438-.67.944-.88 1.52-.214.574-.32 1.186-.32 1.837 0 .65.1 1.262.3 1.837.2.575.494 1.08.88 1.52.39.436.85.78 1.39 1.03.536.25 1.142.375 1.817.375.626 0 1.244-.12 1.857-.356.61-.24 1.1-.59 1.48-1.04l3.41 4.16c-.78.75-1.78 1.33-3 1.76-1.23.42-2.53.63-3.9.63-1.48 0-2.85-.23-4.13-.68-1.28-.45-2.38-1.11-3.32-1.97-.94-.86-1.68-1.91-2.22-3.13-.54-1.23-.81-2.61-.81-4.16 0-1.53.27-2.9.8-4.13.54-1.23 1.27-2.27 2.21-3.13.93-.86 2.04-1.53 3.31-1.99 1.27-.47 2.64-.7 4.09-.7.67 0 1.34.06 2 .19.66.12 1.3.29 1.91.5.61.21 1.18.47 1.69.78.51.31.95.65 1.33 1.03l-3.56 4.13zm12.675-1.425v7.126c0 .875.17 1.53.506 1.968.34.44.95.66 1.82.66.3 0 .62-.02.96-.07.34-.05.62-.12.85-.22l.08 4.5c-.42.15-.96.28-1.61.4-.65.12-1.3.17-1.95.17-1.25 0-2.3-.15-3.15-.47-.85-.31-1.53-.76-2.04-1.35-.51-.58-.88-1.28-1.11-2.1-.22-.81-.33-1.71-.33-2.72v-7.88h-3v-4.61h2.96v-4.92h6.04v4.92h4.39v4.62h-4.38z"/>
              <path fill="#FFDE37" d="M128.528 105.46l30.45 60.9h-60.9"/>
              <ellipse cx="56.062" cy="136.617" fill="#FF41B4" rx="30.686" ry="30.686"/>
              <path fill="#19A974" d="M172.432 105.46h61.372v61.37h-61.372z"/>
            </g>
          </svg>
        </div>

        <div style="flex: 1; box-sizing: border-box; margin-left: 8px">
          Learn all about <strong>functional components</strong> in a new course by Learn React.
        </div>
      </a>
    </div>
  </h1>

  <div style="max-width: 800px">
    <h2 id="contents">Contents</h2>
<ul>
<li><a href="#stateless-function">Stateless function</a></li>
<li><a href="#jsx-spread-attributes">JSX spread attributes</a></li>
<li><a href="#destructuring-arguments">Destructuring arguments</a></li>
<li><a href="#conditional-rendering">Conditional rendering</a></li>
<li><a href="#children-types">Children types</a></li>
<li><a href="#array-as-children">Array as children</a></li>
<li><a href="#function-as-children">Function as children</a></li>
<li><a href="#render-callback">Render callback</a></li>
<li><a href="#children-pass-through">Children pass-through</a></li>
<li><a href="#proxy-component">Proxy component</a></li>
<li><a href="#style-component">Style component</a></li>
<li><a href="#event-switch">Event switch</a></li>
<li><a href="#layout-component">Layout component</a></li>
<li><a href="#container-component">Container component</a></li>
<li><a href="#higher-order-component">Higher-order component</a></li>
<li><a href="#state-hoisting">State hoisting</a></li>
<li><a href="#controlled-input">Controlled input</a></li>
</ul>
<h2 id="stateless-function">Stateless function</h2>
<p><a href="https://facebook.github.io/react/docs/components-and-props.html">Stateless functions</a> are a brilliant way to define highly reusable components. They don’t hold <code>state</code>; they’re just functions.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">Greeting</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hi</span> <span class="nx">there</span><span class="o">!&lt;</span><span class="err">/div&gt;</span>
</pre></div>

</code></pre>
<p>They get passed <code>props</code> and <code>context</code>.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">Greeting</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{</span><span class="nx">color</span><span class="o">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">color</span><span class="p">}}</span><span class="o">&gt;</span><span class="nx">Hi</span> <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">!&lt;</span><span class="err">/div&gt;</span>
</pre></div>

</code></pre>
<p>They can define local variables, where a function block is used.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">Greeting</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">style</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">fontWeight</span><span class="o">:</span> <span class="s2">&quot;bold&quot;</span><span class="p">,</span>
    <span class="nx">color</span><span class="o">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">color</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">style</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<p>But you could get the same result by using other functions.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">getStyle</span> <span class="o">=</span> <span class="nx">context</span> <span class="o">=&gt;</span> <span class="p">({</span>
  <span class="nx">fontWeight</span><span class="o">:</span> <span class="s2">&quot;bold&quot;</span><span class="p">,</span>
  <span class="nx">color</span><span class="o">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">color</span><span class="p">,</span>
<span class="p">})</span>

<span class="kr">const</span> <span class="nx">Greeting</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">getStyle</span><span class="p">(</span><span class="nx">context</span><span class="p">)}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</pre></div>

</code></pre>
<p>They can have defined <code>defaultProps</code>, <code>propTypes</code> and <code>contextTypes</code>.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="nx">Greeting</span><span class="p">.</span><span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">isRequired</span>
<span class="p">}</span>
<span class="nx">Greeting</span><span class="p">.</span><span class="nx">defaultProps</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Guest&quot;</span>
<span class="p">}</span>
<span class="nx">Greeting</span><span class="p">.</span><span class="nx">contextTypes</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">color</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<h2 id="jsx-spread-attributes">JSX spread attributes</h2>
<p>Spread Attributes is a JSX feature. It’s syntactic sugar for passing all of an object’s properties as JSX attributes.</p>
<p>These two examples are equivalent.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="c1">// props written as attributes</span>
<span class="o">&lt;</span><span class="nx">main</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;main&quot;</span> <span class="nx">role</span><span class="o">=</span><span class="s2">&quot;main&quot;</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">children</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/main&gt;</span>

<span class="c1">// props &quot;spread&quot; from object</span>
<span class="o">&lt;</span><span class="nx">main</span> <span class="p">{...{</span><span class="nx">className</span><span class="o">:</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span> <span class="nx">role</span><span class="o">:</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span> <span class="nx">children</span><span class="p">}}</span> <span class="o">/&gt;</span>
</pre></div>

</code></pre>
<p>Use this to forward <code>props</code> to underlying components.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">FancyDiv</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;fancy&quot;</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span> <span class="o">/&gt;</span>
</pre></div>

</code></pre>
<p>Now, I can expect <code>FancyDiv</code> to add the attributes it’s concerned with as well as those it’s not.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">FancyDiv</span> <span class="nx">data</span><span class="o">-</span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;my-fancy-div&quot;</span><span class="o">&gt;</span><span class="nx">So</span> <span class="nx">Fancy</span><span class="o">&lt;</span><span class="err">/FancyDiv&gt;</span>

<span class="c1">// output: &lt;div className=&quot;fancy&quot; data-id=&quot;my-fancy-div&quot;&gt;So Fancy&lt;/div&gt;</span>
</pre></div>

</code></pre>
<p>Keep in mind that order matters. If <code>props.className</code> is defined, it’ll clobber the <code>className</code> defined by <code>FancyDiv</code></p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">FancyDiv</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;my-fancy-div&quot;</span> <span class="o">/&gt;</span>

<span class="c1">// output: &lt;div className=&quot;my-fancy-div&quot;&gt;&lt;/div&gt;</span>
</pre></div>

</code></pre>
<p>We can make <code>FancyDiv</code>s className always “win” by placing it after the spread props <code>({...props})</code>.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="c1">// my `className` clobbers your `className`</span>
<span class="kr">const</span> <span class="nx">FancyDiv</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;fancy&quot;</span> <span class="o">/&gt;</span>
</pre></div>

</code></pre>
<p>You should handle these types of props gracefully. In this case, I’ll merge the author’s <code>props.className</code> with the <code>className</code> needed to style my component.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">FancyDiv</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">className</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span>
    <span class="nx">className</span><span class="o">=</span><span class="p">{[</span><span class="s2">&quot;fancy&quot;</span><span class="p">,</span> <span class="nx">className</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)}</span>
    <span class="p">{...</span><span class="nx">props</span><span class="p">}</span>
  <span class="o">/&gt;</span>
</pre></div>

</code></pre>
<h2 id="destructuring-arguments">destructuring arguments</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">Destructuring assignment</a> is an ES2015 feature. It pairs nicely with <code>props</code> in Stateless Functions.</p>
<p>These examples are equivalent.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">Greeting</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hi</span> <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">!&lt;</span><span class="err">/div&gt;</span>

<span class="kr">const</span> <span class="nx">Greeting</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">name</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hi</span> <span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">!&lt;</span><span class="err">/div&gt;</span>
</pre></div>

</code></pre>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters">rest parameter syntax</a> (<code>...</code>) allows you to collect all the remaining properties in a new object.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">Greeting</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">name</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hi</span> <span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">!&lt;</span><span class="err">/div&gt;</span>
</pre></div>

</code></pre>
<p>In turn, this object can use <a href="#jsx-spread-attributes">JSX Spread Attributes</a> to forward <code>props</code> to the composed component.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">Greeting</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">name</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Hi</span> <span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">!&lt;</span><span class="err">/div&gt;</span>
</pre></div>

</code></pre>
<p>Avoid forwarding non-DOM <code>props</code> to composed components. Destructuring makes this very easy because you can create a new <code>props</code> object <strong>without</strong> component-specific <code>props</code>.</p>
<h2 id="conditional-rendering">conditional rendering</h2>
<p>You can’t use regular if/else conditions inside a component definition. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator">The conditional (ternary) operator</a> is your friend.</p>
<p><code>if</code></p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="p">{</span><span class="nx">condition</span> <span class="o">&amp;&amp;</span> <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="nx">Rendered</span> <span class="nx">when</span> <span class="err">`</span><span class="nx">truthy</span><span class="err">`</span><span class="o">&lt;</span><span class="err">/span&gt; }</span>
</pre></div>

</code></pre>
<p><code>unless</code></p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="p">{</span><span class="nx">condition</span> <span class="o">||</span> <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="nx">Rendered</span> <span class="nx">when</span> <span class="err">`</span><span class="nx">falsey</span><span class="err">`</span><span class="o">&lt;</span><span class="err">/span&gt; }</span>
</pre></div>

</code></pre>
<p><code>if-else</code> (tidy one-liners)</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="p">{</span><span class="nx">condition</span>
  <span class="o">?</span> <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="nx">Rendered</span> <span class="nx">when</span> <span class="err">`</span><span class="nx">truthy</span><span class="err">`</span><span class="o">&lt;</span><span class="err">/span&gt;</span>
  <span class="o">:</span> <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="nx">Rendered</span> <span class="nx">when</span> <span class="err">`</span><span class="nx">falsey</span><span class="err">`</span><span class="o">&lt;</span><span class="err">/span&gt;</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<p><code>if-else</code> (big blocks)</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="p">{</span><span class="nx">condition</span> <span class="o">?</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span>
    <span class="nx">Rendered</span> <span class="nx">when</span> <span class="err">`</span><span class="nx">truthy</span><span class="err">`</span>
  <span class="o">&lt;</span><span class="err">/span&gt;</span>
<span class="p">)</span> <span class="o">:</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span>
    <span class="nx">Rendered</span> <span class="nx">when</span> <span class="err">`</span><span class="nx">falsey</span><span class="err">`</span>
  <span class="o">&lt;</span><span class="err">/span&gt;</span>
<span class="p">)}</span>
</pre></div>

</code></pre>
<h2 id="children-types">Children types</h2>
<p>React can render <code>children</code> of many types. In most cases it’s either an <code>array</code> or a <code>string</code>.</p>
<p><code>string</code></p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
  <span class="nx">Hello</span> <span class="nx">World</span><span class="o">!</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</pre></div>

</code></pre>
<p><code>array</code></p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
  <span class="p">{[</span><span class="s2">&quot;Hello &quot;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="nx">World</span><span class="o">&lt;</span><span class="err">/span&gt;, &quot;!&quot;]}</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</pre></div>

</code></pre>
<p>Functions may be used as children. However, it requires <a href="#render-callback">coordination with the parent component</a> to be useful.</p>
<p><code>function</code></p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
  <span class="p">{()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="s2">&quot;hello world!&quot;</span><span class="p">}()}</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</pre></div>

</code></pre>
<h2 id="array-as-children">Array as children</h2>
<p>Providing an array as <code>children</code> is a very common. It’s how lists are drawn in React.</p>
<p>We use <code>map()</code> to create an array of React Elements for every value in the array.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
  <span class="p">{[</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="s2">&quot;second&quot;</span><span class="p">].</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">item</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/li&gt;</span>
  <span class="p">))}</span>
<span class="o">&lt;</span><span class="err">/ul&gt;</span>
</pre></div>

</code></pre>
<p>That’s equivalent to providing a literal <code>array</code>.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
  <span class="p">{[</span>
    <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span><span class="nx">first</span><span class="o">&lt;</span><span class="err">/li&gt;,</span>
    <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span><span class="nx">second</span><span class="o">&lt;</span><span class="err">/li&gt;,</span>
  <span class="p">]}</span>
<span class="o">&lt;</span><span class="err">/ul&gt;</span>
</pre></div>

</code></pre>
<p>This pattern can be combined with destructuring, JSX Spread Attributes, and other components, for some serious terseness.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
  <span class="p">{</span><span class="nx">arrayOfMessageObjects</span><span class="p">.</span><span class="nx">map</span><span class="p">(({</span> <span class="nx">id</span><span class="p">,</span> <span class="p">...</span><span class="nx">message</span> <span class="p">})</span> <span class="o">=&gt;</span>
    <span class="o">&lt;</span><span class="nx">Message</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">id</span><span class="p">}</span> <span class="p">{...</span><span class="nx">message</span><span class="p">}</span> <span class="o">/&gt;</span>
  <span class="p">)}</span>
<span class="o">&lt;</span><span class="err">/ul&gt;</span>
</pre></div>

</code></pre>
<h2 id="function-as-children">Function as children</h2>
<p>Using a function as <code>children</code> isn’t inherently useful.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="s2">&quot;hello world!&quot;</span><span class="p">}()}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</pre></div>

</code></pre>
<p>However, it can be used in component authoring for some serious power. This technique is commonly referred to as <code>render callbacks</code>.</p>
<p>This is a powerful technique used by libraries like <a href="https://github.com/chenglou/react-motion">ReactMotion</a>. When applied, rendering logic can be kept in the owner component, instead of being delegated.</p>
<p>See <a href="#render-callback">Render callbacks</a>, for more details.</p>
<h2 id="render-callback">Render callback</h2>
<p>Here’s a component that uses a Render callback. It’s not useful, but it’s an easy illustration to start with.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">Width</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">children</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
</pre></div>

</code></pre>
<p>The component calls <code>children</code> as a function, with some number of arguments. Here, it’s the number <code>500</code>.</p>
<p>To use this component, we give it a <a href="#function-as-children">function as <code>children</code></a>.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">Width</span><span class="o">&gt;</span>
  <span class="p">{</span><span class="nx">width</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nb">window</span> <span class="nx">is</span> <span class="p">{</span><span class="nx">width</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;}</span>
<span class="o">&lt;</span><span class="err">/Width&gt;</span>
</pre></div>

</code></pre>
<p>We get this output.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nb">window</span> <span class="nx">is</span> <span class="mi">500</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</pre></div>

</code></pre>
<p>With this setup, we can use this <code>width</code> to make rendering decisions.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">Width</span><span class="o">&gt;</span>
  <span class="p">{</span><span class="nx">width</span> <span class="o">=&gt;</span>
    <span class="nx">width</span> <span class="o">&gt;</span> <span class="mi">600</span>
      <span class="o">?</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">min</span><span class="o">-</span><span class="nx">width</span> <span class="nx">requirement</span> <span class="nx">met</span><span class="o">!&lt;</span><span class="err">/div&gt;</span>
      <span class="o">:</span> <span class="kc">null</span>
  <span class="p">}</span>
<span class="o">&lt;</span><span class="err">/Width&gt;</span>
</pre></div>

</code></pre>
<p>If we plan to use this condition a lot, we can define another components to encapsulate the reused logic.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">MinWidth</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">width</span><span class="o">:</span> <span class="nx">minWidth</span><span class="p">,</span> <span class="nx">children</span> <span class="p">})</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">Width</span><span class="o">&gt;</span>
    <span class="p">{</span><span class="nx">width</span> <span class="o">=&gt;</span>
      <span class="nx">width</span> <span class="o">&gt;</span> <span class="nx">minWidth</span>
        <span class="o">?</span> <span class="nx">children</span>
        <span class="o">:</span> <span class="kc">null</span>
    <span class="p">}</span>
  <span class="o">&lt;</span><span class="err">/Width&gt;</span>
</pre></div>

</code></pre>
<p>Obviously a static <code>Width</code> component isn’t useful but one that watches the browser window is. Here’s a sample implementation.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">class</span> <span class="nx">WindowWidth</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">()</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">width</span><span class="o">:</span> <span class="mi">0</span> <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span>
      <span class="p">{</span><span class="nx">width</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">},</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span>
        <span class="s2">&quot;resize&quot;</span><span class="p">,</span>
        <span class="p">({</span> <span class="nx">target</span> <span class="p">})</span> <span class="o">=&gt;</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">width</span><span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">})</span>
      <span class="p">)</span>
    <span class="p">)</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<p>Many developers favor <a href="#higher-order-component">Higher Order Components</a> for this type of functionality. It’s a matter of preference.</p>
<h2 id="children-pass-through">Children pass-through</h2>
<p>You might create a component designed to apply <code>context</code> and render its <code>children</code>.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">class</span> <span class="nx">SomeContextProvider</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">getChildContext</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span><span class="nx">some</span><span class="o">:</span> <span class="s2">&quot;context&quot;</span><span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// how best do we return `children`?</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<p>You’re faced with a decision. Wrap <code>children</code> in an extraneous <code>&lt;div /&gt;</code> or return <code>children</code> directly. The first options gives you extra markup (which can break some stylesheets). The second will result in unhelpful errors.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="c1">// option 1: extra div</span>
<span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">children</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="c1">// option 2: unhelpful errors</span>
<span class="k">return</span> <span class="nx">children</span>
</pre></div>

</code></pre>
<p>It’s best to treat <code>children</code> as an opaque data type. React provides <code>React.Children</code> for dealing with <code>children</code> appropriately.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Children</span><span class="p">.</span><span class="nx">only</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span>
</pre></div>

</code></pre>
<h2 id="proxy-component">Proxy component</h2>
<p><em>(I’m not sure if this name makes sense)</em></p>
<p>Buttons are everywhere in web apps. And every one of them must have the <code>type</code> attribute set to “button”.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span><span class="o">&gt;</span>
</pre></div>

</code></pre>
<p>Writing this attribute hundreds of times is error prone. We can write a higher level component to proxy <code>props</code> to a lower-level <code>button</code> component.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span>
</pre></div>

</code></pre>
<p>We can use <code>Button</code> in place of <code>button</code> and ensure that the <code>type</code> attribute is consistently applied everywhere.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">Button</span> <span class="o">/&gt;</span>
<span class="c1">// &lt;button type=&quot;button&quot;&gt;&lt;button&gt;</span>

<span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;CTA&quot;</span><span class="o">&gt;</span><span class="nx">Send</span> <span class="nx">Money</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="c1">// &lt;button type=&quot;button&quot; class=&quot;CTA&quot;&gt;Send Money&lt;/button&gt;</span>
</pre></div>

</code></pre>
<h2 id="style-component">Style component</h2>
<p>This is a <a href="#proxy-component">Proxy component</a> applied to the practices of style.</p>
<p>Say we have a button. It uses classes to be styled as a “primary” button.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;btn btn-primary&quot;</span><span class="o">&gt;</span>
</pre></div>

</code></pre>
<p>We can generate this output using a couple single-purpose components.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">PrimaryBtn</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">Btn</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span> <span class="nx">primary</span> <span class="o">/&gt;</span>

<span class="kr">const</span> <span class="nx">Btn</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">className</span><span class="p">,</span> <span class="nx">primary</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">button</span>
    <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span>
    <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classnames</span><span class="p">(</span>
      <span class="s2">&quot;btn&quot;</span><span class="p">,</span>
      <span class="nx">primary</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;btn-primary&quot;</span><span class="p">,</span>
      <span class="nx">className</span>
    <span class="p">)}</span>
    <span class="p">{...</span><span class="nx">props</span><span class="p">}</span>
  <span class="o">/&gt;</span>
</pre></div>

</code></pre>
<p>It can help to visualize this.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="nx">PrimaryBtn</span><span class="p">()</span>
  <span class="err">↳</span> <span class="nx">Btn</span><span class="p">({</span><span class="nx">primary</span><span class="o">:</span> <span class="kc">true</span><span class="p">})</span>
    <span class="err">↳</span> <span class="nx">Button</span><span class="p">({</span><span class="nx">className</span><span class="o">:</span> <span class="s2">&quot;btn btn-primary&quot;</span><span class="p">},</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;button&quot;</span><span class="p">})</span>
      <span class="err">↳</span> <span class="s1">&#39;&lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot;&gt;&lt;/button&gt;&#39;</span>
</pre></div>

</code></pre>
<p>Using these components, all of these result in the same output.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">PrimaryBtn</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">Btn</span> <span class="nx">primary</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">button</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;btn btn-primary&quot;</span> <span class="o">/&gt;</span>
</pre></div>

</code></pre>
<p>This can be a huge boon to style maintenance. It isolates all concerns of style to a single component.</p>
<h2 id="event-switch">Event switch</h2>
<p>When writing event handlers it’s common to adopt the <code>handle{eventName}</code> naming convention.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="nx">handleClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* do something */</span> <span class="p">}</span>
</pre></div>

</code></pre>
<p>For components that handle several event types, these function names can be repetitive. The names themselves might not provide much value, as they simply proxy to other actions/functions.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="nx">handleClick</span><span class="p">()</span> <span class="p">{</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;./actions/doStuff&quot;</span><span class="p">)(</span><span class="cm">/* action stuff */</span><span class="p">)</span> <span class="p">}</span>
<span class="nx">handleMouseEnter</span><span class="p">()</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">hovered</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span> <span class="p">}</span>
<span class="nx">handleMouseLeave</span><span class="p">()</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">hovered</span><span class="o">:</span> <span class="kc">false</span> <span class="p">})</span> <span class="p">}</span>
</pre></div>

</code></pre>
<p>Consider writing a single event handler for your component and switching on <code>event.type</code>.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="nx">handleEvent</span><span class="p">({</span><span class="nx">type</span><span class="p">})</span> <span class="p">{</span>
  <span class="k">switch</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="s2">&quot;click&quot;</span><span class="o">:</span>
      <span class="k">return</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;./actions/doStuff&quot;</span><span class="p">)(</span><span class="cm">/* action dates */</span><span class="p">)</span>
    <span class="k">case</span> <span class="s2">&quot;mouseenter&quot;</span><span class="o">:</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">hovered</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
    <span class="k">case</span> <span class="s2">&quot;mouseleave&quot;</span><span class="o">:</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">hovered</span><span class="o">:</span> <span class="kc">false</span> <span class="p">})</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="err">`</span><span class="nx">No</span> <span class="k">case</span> <span class="k">for</span> <span class="nx">event</span> <span class="nx">type</span> <span class="s2">&quot;${type}&quot;</span><span class="err">`</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<p>Alternatively, for simple components, you can call imported actions/functions directly from components, using arrow functions.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">someImportedAction</span><span class="p">({</span> <span class="nx">action</span><span class="o">:</span> <span class="s2">&quot;DO_STUFF&quot;</span> <span class="p">})}</span>
</pre></div>

</code></pre>
<p>Don’t fret about performance optimizations until you have problems. Seriously don’t.</p>
<h2 id="layout-component">Layout component</h2>
<p>Layout components result in some form of static DOM element. It might not need to update frequently, if ever.</p>
<p>Consider a component that renders two <code>children</code> side-by-side.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">HorizontalSplit</span>
  <span class="nx">leftSide</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">SomeSmartComponent</span> <span class="o">/&gt;</span><span class="p">}</span>
  <span class="nx">rightSide</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">AnotherSmartComponent</span> <span class="o">/&gt;</span><span class="p">}</span>
<span class="o">/&gt;</span>
</pre></div>

</code></pre>
<p>We can aggressively optimize this component.</p>
<p>While <code>HorizontalSplit</code> will be <code>parent</code> to both components, it will never be their <code>owner</code>. We can tell it to update never, without interrupting the lifecycle of the components inside.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">class</span> <span class="nx">HorizontalSplit</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">shouldComponentUpdate</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">&lt;</span><span class="nx">FlexContainer</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">leftSide</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">rightSide</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="o">&lt;</span><span class="err">/FlexContainer&gt;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<h2 id="container-component">Container component</h2>
<p>“A container does data fetching and then renders its corresponding sub-component. That’s it.”&mdash;<a href="https://twitter.com/jasonbonta">Jason Bonta</a></p>
<p>Given this reusable <code>CommentList</code> component.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">CommentList</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">comments</span> <span class="p">})</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
    <span class="p">{</span><span class="nx">comments</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">comment</span> <span class="o">=&gt;</span>
      <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">comment</span><span class="p">.</span><span class="nx">body</span><span class="p">}</span><span class="o">-</span><span class="p">{</span><span class="nx">comment</span><span class="p">.</span><span class="nx">author</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/li&gt;</span>
    <span class="p">)}</span>
  <span class="o">&lt;</span><span class="err">/ul&gt;</span>
</pre></div>

</code></pre>
<p>We can create a new component responsible for fetching data and rendering the stateless <code>CommentList</code> component.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">class</span> <span class="nx">CommentListContainer</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">()</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">comments</span><span class="o">:</span> <span class="p">[]</span> <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/my-comments.json&quot;</span><span class="p">,</span>
      <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
      <span class="nx">success</span><span class="o">:</span> <span class="nx">comments</span> <span class="o">=&gt;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">comments</span><span class="o">:</span> <span class="nx">comments</span><span class="p">});</span>
    <span class="p">})</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">CommentList</span> <span class="nx">comments</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">comments</span><span class="p">}</span> <span class="o">/&gt;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<p>We can write different containers for different application contexts.</p>
<h2 id="higher-order-component">Higher-order component</h2>
<p>A <a href="https://en.wikipedia.org/wiki/Higher-order_function">higher-order function</a> is a function that takes and/or returns a function. It’s not more complicated than that. So, what’s a higher-order component?</p>
<p>If you’re already using <a href="#container-component">container components</a>, these are just generic containers, wrapped up in a function.</p>
<p>Let’s start with our stateless <code>Greeting</code> component.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">Greeting</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">name</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Connecting</span><span class="p">...</span><span class="o">&lt;</span><span class="err">/div&gt; }</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hi</span> <span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">!&lt;</span><span class="err">/div&gt;</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<p>If it gets <code>props.name</code>, it’s gonna render that data. Otherwise it’ll say that it’s “Connecting…”. Now for the the higher-order bit.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">Connect</span> <span class="o">=</span> <span class="nx">ComposedComponent</span> <span class="o">=&gt;</span>
  <span class="kr">class</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
      <span class="kr">super</span><span class="p">()</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this would fetch or connect to a store</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Michael&quot;</span> <span class="p">})</span>
    <span class="p">}</span>

    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">ComposedComponent</span>
          <span class="p">{...</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">}</span>
          <span class="nx">name</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
        <span class="o">/&gt;</span>
      <span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
</pre></div>

</code></pre>
<p>This is just a function that returns component that renders the component we passed as an argument.</p>
<p>Last step, we need to wrap our our <code>Greeting</code> component in <code>Connect</code>.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">const</span> <span class="nx">ConnectedMyComponent</span> <span class="o">=</span> <span class="nx">Connect</span><span class="p">(</span><span class="nx">Greeting</span><span class="p">)</span>
</pre></div>

</code></pre>
<p>This is a powerful pattern for providing fetching and providing data to any number of <a href="#stateless-function">stateless function components</a>.</p>
<h2 id="state-hoisting">State hoisting</h2>
<p><a href="#stateless-function">Stateless functions</a> don’t hold state (as the name implies).</p>
<p>Events are changes in state.
Their data needs to be passed to stateful <a href="#container-component">container components</a> parents.</p>
<p>This is called “state hoisting”.
It’s accomplished by passing a callback from a container component to a child component.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">class</span> <span class="nx">NameContainer</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Name</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">newName</span> <span class="o">=&gt;</span> <span class="nx">alert</span><span class="p">(</span><span class="nx">newName</span><span class="p">)}</span> <span class="o">/&gt;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">Name</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">onChange</span> <span class="p">})</span> <span class="o">=&gt;</span>
  <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span> <span class="o">/&gt;</span>
</pre></div>

</code></pre>
<p><code>Name</code> receives an <code>onChange</code> callback from <code>NameContainer</code> and calls on events.</p>
<p>The <code>alert</code> above makes for a terse demo but it’s not changing state.
Let’s change the internal state of <code>NameContainer</code>.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">class</span> <span class="nx">NameContainer</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">()</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Name</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">newName</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span> <span class="nx">newName</span><span class="p">})}</span> <span class="o">/&gt;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<p>The state is <em>hoisted</em> to the container, by the provided callback, where it’s used to update local state.
This sets a nice clear boundary and maximizes the re-usability of stateless function.</p>
<p>This pattern isn’t limited to stateless functions.
Because stateless function don’t have lifecycle events,
you’ll use this pattern with component classes as well.</p>
<p><em><a href="#controlled-input">Controlled input</a> is an important pattern to know for use with state hoisting</em></p>
<p><em>(It’s best to process the event object on the stateful component)</em></p>
<h2 id="controlled-input">Controlled input</h2>
<p>It’s hard to talk about controlled inputs in the abstract.
Let’s start with an uncontrolled (normal) input and go from there.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="o">/&gt;</span>
</pre></div>

</code></pre>
<p>When you fiddle with this input in the browser, you see your changes.
This is normal.</p>
<p>A controlled input disallows the DOM mutations that make this possible.
You set the <code>value</code> of the input in component-land and it doesn’t change in DOM-land.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;This won&#39;t change. Try it.&quot;</span> <span class="o">/&gt;</span>
</pre></div>

</code></pre>
<p>Obviously static inputs aren’t very useful to your users.
So, we derive a <code>value</code> from state.</p>
<pre><code class="lang-js"><div class="highlight"><pre><span class="kr">class</span> <span class="nx">ControlledNameInput</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">()</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span> <span class="o">/&gt;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</code></pre>
<p>Then, changing the input is a matter of changing component state.</p>
<pre><code class="lang-js"><div class="highlight"><pre>    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">input</span>
        <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
        <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">})}</span>
      <span class="o">/&gt;</span>
    <span class="p">)</span>
</pre></div>

</code></pre>
<p>This is a controlled input.
It only updates the DOM when state has changed in our component.
This is invaluable when creating consistent UIs.</p>
<p><em>If you’re using <a href="#stateless-function">stateless functions</a> for form elements,
read about using <a href="#state-hoisting">state hoisting</a> to move new state up the component tree.</em></p>

    <footer style="margin-top: 3rem">
      <p>
        &copy; Copyright 2017, <a href="" target="_blank" rel="noopener" class="black-link">Michael Chan</a>
      </p>
    </footer>
  </div>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56273983-4', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>